# 1. ν”„λ΅μ νΈ μ„¤μ •

## spring initializr μ„ μ‚¬μ©ν•λ” μ΄μ λ”?

- spring ν”„λ΅μ νΈλ¥Ό λΉ λ¥΄κ³  ν‘μ¤€ν™”λ λ°©μ‹μΌλ΅ μ‹μ‘ν•  μ μλ„λ΅ λ„μ™€μ£Όλ” λ„κµ¬μ΄κΈ° λ•λ¬Έ

1. ν”„λ΅μ νΈ κµ¬μ΅° μλ™ μƒμ„±

- maven λλ” gradle κΈ°λ°μ λΉλ“ μ„¤μ • νμΌμ„ μλ™μΌλ΅ λ§λ“¤μ–΄μ¤
- λ””λ ‰ν„°λ¦¬ κµ¬μ΅°λ¥Ό ν‘μ¤€ spring boot λ°©μ‹μΌλ΅ μƒμ„± -> κ°λ°μκ°€ λ°”λ΅ μ½”λ”© μ‹μ‘ κ°€λ¥

2. μμ΅΄μ„± κ΄€λ¦¬ νΈλ¦¬

- ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬λ¥Ό μ„ νƒν•λ©΄ μλ™μΌλ΅ μ¶”κ°€
- λ²„μ „ νΈν™μ„± λ¬Έμ λ¥Ό μ¤„μ—¬μ¤ -> spring boot κ°€ κ¶μ¥ν•λ” μ•μ •μ μΈ λ²„μ „μΌλ΅ μ„¤μ •

3. μ„¤μ • μµμ†ν™”

- application.properties κΈ°λ³Έ μ„¤μ • μ κ³µ
- λ‚΄μ¥ μ„λ²„(tomcat) λ“± ν¬ν•¨ -> λ³„λ„ μ„λ²„ μ„¤μΉ μ—†μ΄ λ°”λ΅ μ‹¤ν–‰ κ°€λ¥

4. μƒμ‚°μ„± ν–¥μƒ

- μ΄κΈ° μ„¤μ •μ— μ‹κ°„μ„ μ“°μ§€ μ•κ³  λΉ„μ¦λ‹μ¤ λ΅μ§ κ°λ°μ— μ§‘μ¤‘ κ°€λ¥
- ν€ ν”„λ΅μ νΈμ—μ„ λ™μΌν• κµ¬μ΅°λ΅ μ‹μ‘ -> ν‘μ—… ν¨μ¨μ„± μ¦κ°€

---

## λ‚΄κ°€ μ¶”κ°€ν•λ ¤λ” μμ΅΄μ„±

### Spring Web

- λ©μ : μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ§λ“¤κΈ° μ„ν• ν•µμ‹¬ λ¨λ“
- ν¬ν•¨ λ‚΄μ©:
  - Spring MVC: HTTP μ”μ²­/μ‘λ‹µ μ²λ¦¬, μ»¨νΈλ΅¤λ¬, λΌμ°ν… λ“±
  - λ‚΄μ¥ ν†°μΊ£ μ„λ²„: λ³„λ„μ μ„λ²„ μ„¤μ • μ—†μ΄ μ‹¤ν–‰ κ°€λ¥
- μ‚¬μ© μμ‹:
  - REST API κ°λ°
  - μ›Ή νμ΄μ§€ λΌμ°ν…
  - JSON μ‘λ‹µ μ²λ¦¬

μ¦‰, μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ λ°±μ—”λ“ λ΅μ§μ„ λ‹΄λ‹Ή

### Thymeleaf

- λ©μ : μ„λ²„ μ‚¬μ΄λ“ ν…ν”λ¦Ώ μ—”μ§„
- νΉμ§•:
  - HTML νμΌμ— λ™μ μΌλ΅ λ°μ΄ν„°λ¥Ό λ°”μΈλ”©
  - JSP λ€μ‹  λ§μ΄ μ‚¬μ©λ¨
  - Spring MVC μ™€ μμ—°μ¤λ½κ² ν†µν•©
- μ‚¬μ© μμ‹:
  - HTML νμ΄μ§€μ—μ„ ${λ³€μ} ν•νƒλ΅ λ°μ΄ν„° μ¶λ ¥
  - μ΅°κ±΄λ¬Έ, λ°λ³µλ¬Έμ„ HTML μ•μ—μ„ μ²λ¦¬

μ¦‰, λ·° λ λ”λ§μ„ λ‹΄λ‹Ή

## ν”„λ΅μ νΈ κµ¬μ΅°

- ν¨ν‚¤μ§€

- `domain`: λ„λ©”μΈ λ¨λΈ ν΄λμ¤
- `repository`: μ €μ¥μ† μΈν„°νμ΄μ¤ λ° κµ¬ν„μ²΄
- `service`: λΉ„μ¦λ‹μ¤ λ΅μ§
- `controller`: μ›Ή μ»¨νΈλ΅¤λ¬

1. λ„λ©”μΈ

- μ• ν”λ¦¬μΌ€μ΄μ…μ ν•µμ‹¬ λ°μ΄ν„°μ™€ κ°λ…μ„ ν‘ν„
- κµ¬ν„: μ£Όλ΅ entity ν΄λμ¤(User, Product) λ΅ λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ”κ³Ό λ§¤ν•‘
- μμ‹

```java
@Entity
public class User {
    @Id @GeneratedValue
    private Long id;
    private String name;
}
```

- ν•µμ‹¬: λΉ„μ¦λ‹μ¤μ—μ„ λ‹¤λ£¨λ” μ‹¤μ  κ°λ…μ„ μ½”λ“λ΅ λ¨λΈλ§

2. λ¦¬ν¬μ§€ν† λ¦¬(Repository)

- μ—­ν• : λ°μ΄ν„°λ² μ΄μ¤ μ ‘κ·Ό λ‹΄λ‹Ή
- κµ¬ν„: Spring Data JPA μ JpaRepository μΈν„°νμ΄μ¤λ¥Ό μƒμ†
- μμ‹

```java
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByName(String name);
}
```

- ν•µμ‹¬ CRUD μ‘μ—…μ„ μ‰½κ² μ²λ¦¬

3. λΉ„μ¦λ‹μ¤ λ΅μ§(service)

- μ—­ν• : ν•µμ‹¬ λ΅μ§μ„ μ²λ¦¬ν•λ” κ³„μΈµ
- κµ¬ν„: @Service ν΄λμ¤μ—μ„ λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό νΈμ¶ν•κ³ , ν•„μ”ν• κ³„μ‚°/κ²€μ¦ μν–‰
- μμ‹:

```java
@Service
public class UserService {
    private final UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    publicUser registerUser(String name) {
        // λΉ„μ¦λ‹μ¤ κ·μΉ™ μ μ©
        return userRepository.save(new User(name));
    }
}
```

- ν•µμ‹¬: μ»¨νΈλ΅¤λ¬μ™€ λ¦¬ν¬μ§€ν† λ¦¬ μ‚¬μ΄μ—μ„ λΉ„μ¦λ‹μ¤ κ·μΉ™μ„ λ‹΄λ‹Ή

4. μ»¨νΈλ΅¤λ¬

- ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ°›μ•„μ„ μ‘λ‹µ λ°ν™
- κµ¬ν„: @Controller λλ” @RestController μ‚¬μ©
- μμ‹

```java
@RestController
@RequestMapping("/users")
public class UserController {
    private final UserService userService;

    @PostMapping
    public User createUser(@RequestParam String name) {
        return userService.registerUser(name);
    }
}
```

- ν•µμ‹¬: HTTP μ”μ²­/μ‘λ‹µ μ²λ¦¬, λ·° λ λ”λ§ λλ” JSON λ°ν™

## μ •λ¦¬ κµ¬μ΅°

`Controller -> Service -> Repository -> Domain`

# 2. Domain κ³„μΈµ κµ¬ν„

`MemberRepository.java`

## μ™ μΈν„°νμ΄μ¤μ—λ” @Repository λΌκ³  λ¶™μ΄μ§€ μ•μ„κΉ?

- @Repository λ” Spring μ΄ ν•΄λ‹Ή ν΄λμ¤λ¥Ό λΉ(Bean) μΌλ΅ λ“±λ΅ν•κ³  μμ™Έ λ³€ν™(AOP) λ¥Ό μ μ©ν•κΈ° μ„ν• μ–΄λ…Έν…μ΄μ…μ΄λ‹¤.
- ν•μ§€λ§ μΈν„°νμ΄μ¤ μμ²΄λ” λΉμΌλ΅ λ“±λ΅λμ§€ μ•κ³ , κµ¬ν„μ²΄κ°€ λΉμΌλ΅ λ“±λ΅λ¨
- μλ¥Ό λ“¤μ–΄
  - MemberRepository λ” μΈν„°νμ΄μ¤ -> λΉμ΄ μ•„λ‹
  - MemoryMemberRepository κµ¬ν„μ²΄ -> @Repository λ¶™μ΄λ©΄ λΉμΌλ΅ λ“±λ΅λ¨

## κ¶μ¥ λ°©μ‹

- λ©”λ¨λ¦¬ κµ¬ν„μ²΄λ‚ μ§μ ‘ κµ¬ν„ν• ν΄λμ¤μ—λ” @Repository λ¶™μ΄κΈ°
- μΈν„°νμ΄μ¤μ—λ” λ¶™μ΄μ§€ μ•μ•„λ„ λ¨

## μΈν„°νμ΄μ¤ λ©”μ„λ“μ— public μ„ λ¶™μ—¬μ•Ό ν• κΉ?

-> No !

β… Java κ·μΉ™

- μΈν„°νμ΄μ¤ μ•μ λ©”μ„λ“λ” μλ™μΌλ΅ public abstract μ„
- λ”°λΌμ„ λ‹¤μ λ‘ μ½”λ“λ” λ™μΌν•¨

```java
Member save(Member member); // OK
public Member save(Member member); // OK (ν•μ§€λ§ λ¶ν•„μ”)
```

`MemoryMemberRepository.java`

```plaintext
3-2. MemoryMemberRepository κµ¬ν„μ²΄ (15μ )
[ ] MemberRepository μΈν„°νμ΄μ¤ κµ¬ν„
[ ] λ‚΄λ¶€ μ €μ¥μ†: Map<Long, Member> μ‚¬μ© (static ν•„λ“)
[ ] ID μλ™ μ¦κ°€: long sequence μ‚¬μ© (static ν•„λ“)
[ ] save(): νμ› μ €μ¥ μ‹ ID μλ™ ν• λ‹Ή λ° μ €μ¥
[ ] findById(): Mapμ—μ„ IDλ΅ μ΅°ν
[ ] findByName(): Stream APIλ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ¦„μΌλ΅ μ΅°ν
[ ] findAll(): λ¨λ“  νμ›μ„ Listλ΅ λ°ν™
[ ] clearStore(): ν…μ¤νΈλ¥Ό μ„ν• μ €μ¥μ† μ΄κΈ°ν™” λ©”μ„λ“ μ¶”κ°€
```

## μ™ λ‚΄λ¶€μ €μ¥μ†μ™€ long sequence λ” static ν•„λ“λ΅ μ“ΈκΉ?

1. μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄μ— λ™μΌν• μ €μ¥μ†λ¥Ό κ³µμ ν•κΈ° μ„ν•΄

- `MemoryMemberRepository` λ” λ©”λ¨λ¦¬ κΈ°λ° μ €μ¥μ†μ΄λ―€λ΅, DB μ—μ„ μ¤‘μ•™μ—μ„ λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•΄μ•Ό ν•¨
- λ§μ•½ Map κ³Ό sequence κ°€ μΈμ¤ν„΄μ¤ ν•„λ“λΌλ©΄, `new MemoryMemberRepository()`λ¥Ό ν•  λ•λ§λ‹¤ μƒλ΅μ΄ μ €μ¥μ†κ°€ μƒκΉ€
- μ΄λ ‡κ²λλ©΄ νμ› λ°μ΄ν„°κ°€ μ—¬λ¬ μ €μ¥μ†μ— ν©μ–΄μ Έμ„ κ΄€λ¦¬λλ―€λ΅, `findAll()` μ΄λ‚ `findById()` κ°€ μΌκ΄€μ„±μκ² λ™μ‘ν•μ§€ μ•μ
- `static` μΌλ΅ μ„ μ–Έν•λ©΄ ν΄λμ¤ λ λ²¨μ—μ„ ν•λ‚μ μ €μ¥μ†λ¥Ό κ³µμ ν•λ―€λ΅, λ¨λ“  μΈμ¤ν„΄μ¤κ°€ κ°™μ€ λ°μ΄ν„°λ¥Ό μ°Έμ΅°ν•¨

2. ID μλ™ μ¦κ°€ κ°’μ μΌκ΄€μ„± μ μ§€

- νμ›μ„ μ €μ¥ν•  λ• sequence λ¥Ό μ΄μ”ν•΄ ID λ¥Ό μλ™μΌλ΅ ν• λ‹Ή
- sequence κ°€ μΈμ¤ν„΄μ¤ ν•„λ“λΌλ©΄, μΈμ¤ν„΄μ¤λ§λ‹¤ ID κ°€ 1λ¶€ν„° μ‹μ‘ν•΄μ„ μ¤‘λ³µ ID κ°€ λ°μƒ
- static μΌλ΅ μ„ μ–Έν•λ©΄ μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄μ—μ„ ID κ°€ μ μΌν•κ² μ¦κ°€

3. ν…μ¤νΈ ν™κ²½μ—μ„ μ΄κΈ°ν™” κ°€λ¥

- clearStore() λ©”μ„λ“λ¥Ό ν†µν•΄ μ €μ¥μ†λ¥Ό μ΄κΈ°ν™”ν•  λ•λ„, static ν•„λ“λΌλ©΄ λ¨λ“  μΈμ¤ν„΄μ¤μ— λ™μΌν•κ² λ°μλ¨
- μ΄λ” ν…μ¤νΈ μ‹ λ…λ¦½μ μΈ ν™κ²½μ„ λ³΄μ¥

## `private static Map<Long, Member> store = new HashMap<>();`

### Map vs HashMap

- Map: μΈν„°νμ΄μ¤. "μ΄λ° κΈ°λ¥μ„ κ°€μ§„ μλ£κµ¬μ΅°κ°€ μμ–΄μ•Ό ν•λ‹¤"λΌλ” μ•½μ†

  - ex. ν‚¤-κ°’ μμΌλ΅ μ €μ¥, ν‚¤λ΅ κ°’μ„ μ°Ύμ„ μ μμ–΄μ•Ό ν•¨

- HashMap: Map μΈν„°νμ΄μ¤λ¥Ό μ‹¤μ λ΅ κµ¬ν„ν• ν΄λμ¤. μ¦‰, "μ•½μ†λ κΈ°λ¥μ„ μ΄λ ‡κ² κµ¬ν„ν–μ–΄" λΌκ³  μ κ³µν•λ” κµ¬μ²΄μ μΈ μλ£κµ¬μ΅°

### μ½”λ“ ν•΄μ„

- λ³€μ νƒ€μ…μ„ μΈν„°νμ΄μ¤(Map)μΌλ΅ μ„ μ–Έ
- μ‹¤μ λ΅λ” HashMap κ°μ²΄λ¥Ό λ§λ“¤μ–΄μ„ λ„£μ

π‘‰ κ·Έλμ„ λ³€μ νƒ€μ…μ€ Map νƒ€μ…μ΄μ§€λ§, μ‹¤μ λ΅ λ‹΄κΈ΄ κ±΄ HashMap μΈμ¤ν„΄μ¤μ„.

### μ™ μ΄λ ‡κ² μ“°λ‚?

- μ μ—°μ„± ν™•λ³΄: λ‚μ¤‘μ— HashMap λ€μ‹  TreeMap, LinkedHashMap κ°™μ€ λ‹¤λ¥Έ κµ¬ν„μ²΄λ΅ λ°”κΏ”λ„, λ³€μ νƒ€μ…μ„ Map μΌλ΅ ν•΄λ‘λ©΄ μ½”λ“ μμ •μ΄ μµμ†ν™”λ¨
- μƒμ†/λ‹¤ν•μ„± κ°λ…: μλ°”μ—μ„λ” μΈν„°νμ΄μ¤ νƒ€μ…μΌλ΅ μ„ μ–Έν•κ³ , κµ¬ν„μ²΄λ¥Ό ν• λ‹Ήν•λ” κ² ν”ν• ν¨ν„΄. λ‹¤ν•μ„±μ„ ν™μ©ν•  μ μμ
